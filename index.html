<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Flipbook</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .upload-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .option-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .option-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .option-title i {
            font-size: 2rem;
            color: #667eea;
        }

        .option-title h3 {
            color: #333;
            font-size: 1.5rem;
        }

        .option-desc {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: inline-block;
            padding: 12px 25px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .file-label:hover {
            background: #764ba2;
        }

        .flipbook-container {
            display: none;
            width: 100%;
            height: 70vh;
            background: #f5f5f5;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        #book {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            transform-origin: left center;
            transition: transform 0.8s ease;
            cursor: pointer;
        }

        .page:nth-child(odd) {
            transform-origin: right center;
            left: 0;
        }

        .page:nth-child(even) {
            left: 50%;
        }

        .page img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .page.flipping {
            transform: rotateY(-180deg);
            z-index: 100;
        }

        .page:nth-child(odd).flipping {
            transform: rotateY(180deg);
        }

        .controls {
            display: none;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        button {
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 120px;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        .page-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .loading {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            display: none;
            padding: 20px;
            background: #fee;
            color: #c00;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #c00;
        }

        .error-details {
            font-family: monospace;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 12px;
        }

        #fileName {
            margin-top: 10px;
            color: #666;
            font-style: italic;
        }

        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #2196f3;
        }

        .instructions h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .instructions ol {
            margin-left: 20px;
            color: #555;
        }

        .instructions li {
            margin-bottom: 10px;
        }

        .thumbnail-bar {
            display: none;
            overflow-x: auto;
            padding: 10px;
            background: white;
            border-radius: 10px;
            margin-top: 20px;
            white-space: nowrap;
        }

        .thumbnail {
            display: inline-block;
            width: 80px;
            height: 100px;
            margin-right: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 5px;
            overflow: hidden;
        }

        .thumbnail:hover {
            border-color: #667eea;
        }

        .thumbnail.active {
            border-color: #ff5722;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .zoom-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            border: none;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-book-open"></i> PDF Flipbook Reader</h1>
        
        <div class="upload-options">
            <!-- Option 1: Upload PDF -->
            <div class="option-card" id="uploadOption">
                <div class="option-title">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Upload PDF File</h3>
                </div>
                <p class="option-desc">Select a PDF file from your computer to create a flipbook.</p>
                <input type="file" id="pdfUpload" class="file-input" accept=".pdf">
                <label for="pdfUpload" class="file-label">
                    <i class="fas fa-file-pdf"></i> Choose PDF File
                </label>
                <div id="fileName"></div>
            </div>

            <!-- Option 2: Local file (same directory) -->
            <div class="option-card" id="localOption">
                <div class="option-title">
                    <i class="fas fa-folder-open"></i>
                    <h3>Load Local PDF</h3>
                </div>
                <p class="option-desc">If your PDF is in the same folder as this HTML file, enter the filename:</p>
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <input type="text" id="localFileName" placeholder="book.pdf" value="book.pdf" 
                           style="flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px;">
                    <button onclick="loadLocalPDF()" style="padding: 12px 25px;">Load</button>
                </div>
            </div>

            <!-- Option 3: URL -->
            <div class="option-card" id="urlOption">
                <div class="option-title">
                    <i class="fas fa-link"></i>
                    <h3>Load from URL</h3>
                </div>
                <p class="option-desc">Enter the URL of a PDF file (must be CORS enabled):</p>
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <input type="url" id="pdfUrl" placeholder="https://example.com/document.pdf" 
                           style="flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px;">
                    <button onclick="loadFromURL()" style="padding: 12px 25px;">Load</button>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h4><i class="fas fa-info-circle"></i> Important Instructions:</h4>
            <ol>
                <li><strong>For local files:</strong> Place your PDF file (e.g., "book.pdf") in the same folder as this HTML file</li>
                <li><strong>OR</strong> Use the upload option to select any PDF from your computer</li>
                <li><strong>Note:</strong> Some browsers restrict local file access. Use Chrome and allow file access if prompted</li>
                <li><strong>Alternative:</strong> Run a local server for best results: 
                    <code style="background: #555; color: white; padding: 2px 5px; border-radius: 3px;">
                        python -m http.server 8000
                    </code>
                </li>
            </ol>
        </div>

        <div class="error-message" id="errorMessage">
            <strong><i class="fas fa-exclamation-triangle"></i> Error Loading PDF</strong>
            <div id="errorDetails">Please check the file path and try again.</div>
            <div class="error-details" id="errorDebug"></div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div id="loadingText">Loading PDF...</div>
            <div id="loadingDetails" style="margin-top: 10px; color: #666;"></div>
        </div>

        <div class="flipbook-container" id="flipbookContainer">
            <div id="book"></div>
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="flipbook.zoomIn()">+</button>
                <button class="zoom-btn" onclick="flipbook.zoomOut()">-</button>
                <button class="zoom-btn" onclick="flipbook.resetZoom()">âŸ²</button>
            </div>
        </div>

        <div class="controls" id="controls">
            <button id="firstBtn"><i class="fas fa-fast-backward"></i> First</button>
            <button id="prevBtn"><i class="fas fa-chevron-left"></i> Prev</button>
            
            <div class="page-info">
                Page: <span id="currentPage">1</span> / <span id="totalPages">0</span>
            </div>
            
            <button id="nextBtn">Next <i class="fas fa-chevron-right"></i></button>
            <button id="lastBtn">Last <i class="fas fa-fast-forward"></i></button>
        </div>

        <div class="thumbnail-bar" id="thumbnailBar"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        class PDFFlipbook {
            constructor() {
                this.pdfDoc = null;
                this.totalPages = 0;
                this.currentPage = 0;
                this.pages = [];
                this.isFlipping = false;
                this.scale = 1.5;
                this.zoom = 1;
                
                this.init();
            }
            
            init() {
                this.setupPDFJS();
                this.setupEventListeners();
            }
            
            setupPDFJS() {
                pdfjsLib.GlobalWorkerOptions.workerSrc = 
                    'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
            }
            
            setupEventListeners() {
                // File upload
                document.getElementById('pdfUpload').addEventListener('change', (e) => {
                    this.handleFileUpload(e.target.files[0]);
                });
                
                // Control buttons
                document.getElementById('firstBtn').addEventListener('click', () => this.goToPage(0));
                document.getElementById('prevBtn').addEventListener('click', () => this.flipPrev());
                document.getElementById('nextBtn').addEventListener('click', () => this.flipNext());
                document.getElementById('lastBtn').addEventListener('click', () => this.goToPage(this.totalPages - 1));
                
                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.target.tagName === 'INPUT') return;
                    
                    switch(e.key) {
                        case 'ArrowLeft': e.preventDefault(); this.flipPrev(); break;
                        case 'ArrowRight': e.preventDefault(); this.flipNext(); break;
                        case 'Home': e.preventDefault(); this.goToPage(0); break;
                        case 'End': e.preventDefault(); this.goToPage(this.totalPages - 1); break;
                    }
                });
            }
            
            async loadPDF(source) {
                try {
                    this.showLoading('Loading PDF document...');
                    this.hideError();
                    
                    // Load PDF from different sources
                    if (source instanceof File) {
                        // From file upload
                        const arrayBuffer = await source.arrayBuffer();
                        this.pdfDoc = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    } else if (typeof source === 'string') {
                        // From URL or local file path
                        this.pdfDoc = await pdfjsLib.getDocument(source).promise;
                    }
                    
                    this.totalPages = this.pdfDoc.numPages;
                    this.showLoading(`Processing ${this.totalPages} pages...`);
                    
                    // Initialize book
                    this.initializeBook();
                    
                    // Load first few pages
                    await this.loadInitialPages();
                    
                    // Show flipbook
                    this.showFlipbook();
                    this.updateUI();
                    
                } catch (error) {
                    console.error('PDF Loading Error:', error);
                    this.showError('Failed to load PDF', error.message);
                } finally {
                    this.hideLoading();
                }
            }
            
            initializeBook() {
                const book = document.getElementById('book');
                book.innerHTML = '';
                
                for (let i = 0; i < this.totalPages; i++) {
                    const page = document.createElement('div');
                    page.className = 'page';
                    page.dataset.page = i;
                    page.dataset.loaded = 'false';
                    
                    // Position pages
                    if (i % 2 === 0) {
                        page.style.left = '50%';
                    } else {
                        page.style.left = '0';
                    }
                    
                    // Placeholder
                    page.innerHTML = `
                        <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f0f0f0;">
                            <div style="text-align:center;">
                                <div style="font-size:2rem;margin-bottom:10px;">ðŸ“„</div>
                                <div>Page ${i + 1}</div>
                                <div style="font-size:0.8rem;color:#999;margin-top:5px;">Loading...</div>
                            </div>
                        </div>
                    `;
                    
                    // Click to flip
                    page.addEventListener('click', () => {
                        if (i === this.currentPage) {
                            this.flipNext();
                        }
                    });
                    
                    book.appendChild(page);
                    page.style.zIndex = this.totalPages - i;
                }
            }
            
            async loadInitialPages() {
                // Load first 3 pages
                const pagesToLoad = Math.min(3, this.totalPages);
                for (let i = 0; i < pagesToLoad; i++) {
                    await this.renderPage(i);
                    this.updateProgress(i + 1, pagesToLoad);
                }
                
                // Generate thumbnails
                this.generateThumbnails();
            }
            
            async renderPage(pageIndex) {
                if (this.pages[pageIndex]) return;
                
                try {
                    const page = await this.pdfDoc.getPage(pageIndex + 1);
                    const viewport = page.getViewport({ scale: this.scale * this.zoom });
                    
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    
                    await page.render({
                        canvasContext: context,
                        viewport: viewport
                    }).promise;
                    
                    const imgData = canvas.toDataURL('image/jpeg', 0.9);
                    this.pages[pageIndex] = imgData;
                    
                    // Update page element
                    this.updatePageElement(pageIndex, imgData);
                    
                } catch (error) {
                    console.error(`Error rendering page ${pageIndex + 1}:`, error);
                }
            }
            
            updatePageElement(pageIndex, imgData) {
                const pageElement = document.querySelector(`.page[data-page="${pageIndex}"]`);
                if (!pageElement) return;
                
                pageElement.dataset.loaded = 'true';
                pageElement.innerHTML = `<img src="${imgData}" alt="Page ${pageIndex + 1}">`;
            }
            
            generateThumbnails() {
                const thumbnailBar = document.getElementById('thumbnailBar');
                thumbnailBar.innerHTML = '';
                thumbnailBar.style.display = 'flex';
                
                // Create thumbnails for first 10 pages initially
                const initialThumbs = Math.min(10, this.totalPages);
                
                for (let i = 0; i < initialThumbs; i++) {
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'thumbnail';
                    thumbnail.dataset.page = i;
                    
                    // Placeholder
                    thumbnail.innerHTML = `<div style="width:100%;height:100%;background:#ddd;display:flex;align-items:center;justify-content:center;font-size:0.8rem;">${i + 1}</div>`;
                    
                    thumbnail.addEventListener('click', () => this.goToPage(i));
                    thumbnailBar.appendChild(thumbnail);
                    
                    // Update with actual image if loaded
                    if (this.pages[i]) {
                        this.updateThumbnail(i, this.pages[i]);
                    }
                }
                
                // Lazy load remaining thumbnails
                this.loadRemainingThumbnails(initialThumbs);
            }
            
            updateThumbnail(pageIndex, imgData) {
                const thumbnail = document.querySelector(`.thumbnail[data-page="${pageIndex}"]`);
                if (thumbnail) {
                    thumbnail.innerHTML = `<img src="${imgData}" alt="Page ${pageIndex + 1}">`;
                }
            }
            
            async loadRemainingThumbnails(startIndex) {
                for (let i = startIndex; i < this.totalPages; i += 5) {
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    for (let j = i; j < Math.min(i + 5, this.totalPages); j++) {
                        const thumbnail = document.createElement('div');
                        thumbnail.className = 'thumbnail';
                        thumbnail.dataset.page = j;
                        thumbnail.innerHTML = `<div style="width:100%;height:100%;background:#ddd;display:flex;align-items:center;justify-content:center;font-size:0.8rem;">${j + 1}</div>`;
                        thumbnail.addEventListener('click', () => this.goToPage(j));
                        document.getElementById('thumbnailBar').appendChild(thumbnail);
                        
                        if (this.pages[j]) {
                            this.updateThumbnail(j, this.pages[j]);
                        }
                    }
                }
            }
            
            async flipNext() {
                if (this.isFlipping || this.currentPage >= this.totalPages - 1) return;
                
                // Ensure next page is loaded
                if (!this.pages[this.currentPage + 1]) {
                    await this.renderPage(this.currentPage + 1);
                }
                
                this.isFlipping = true;
                const currentPage = document.querySelector(`.page[data-page="${this.currentPage}"]`);
                
                if (currentPage) {
                    currentPage.classList.add('flipping');
                    
                    setTimeout(() => {
                        currentPage.style.zIndex = 1;
                        this.currentPage++;
                        this.updateUI();
                        this.isFlipping = false;
                        
                        // Preload next pages
                        this.preloadAdjacentPages();
                    }, 800);
                }
            }
            
            flipPrev() {
                if (this.isFlipping || this.currentPage <= 0) return;
                
                this.isFlipping = true;
                const prevPage = document.querySelector(`.page[data-page="${this.currentPage - 1}"]`);
                
                if (prevPage) {
                    prevPage.classList.remove('flipping');
                    prevPage.style.zIndex = this.totalPages - (this.currentPage - 1);
                    
                    setTimeout(() => {
                        this.currentPage--;
                        this.updateUI();
                        this.isFlipping = false;
                    }, 300);
                }
            }
            
            async goToPage(pageIndex) {
                if (pageIndex < 0 || pageIndex >= this.totalPages) return;
                
                // Ensure page is loaded
                if (!this.pages[pageIndex]) {
                    await this.renderPage(pageIndex);
                }
                
                // Reset all pages
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('flipping');
                    const pageNum = parseInt(page.dataset.page);
                    page.style.zIndex = this.totalPages - pageNum;
                });
                
                this.currentPage = pageIndex;
                this.updateUI();
                
                // Preload adjacent pages
                this.preloadAdjacentPages();
            }
            
            preloadAdjacentPages() {
                const pagesToLoad = [];
                for (let i = 1; i <= 2; i++) {
                    const nextPage = this.currentPage + i;
                    const prevPage = this.currentPage - i;
                    
                    if (nextPage < this.totalPages && !this.pages[nextPage]) {
                        pagesToLoad.push(nextPage);
                    }
                    if (prevPage >= 0 && !this.pages[prevPage]) {
                        pagesToLoad.push(prevPage);
                    }
                }
                
                // Load in background
                pagesToLoad.forEach(pageIndex => {
                    setTimeout(() => this.renderPage(pageIndex), 100);
                });
            }
            
            updateUI() {
                // Update page counter
                document.getElementById('currentPage').textContent = this.currentPage + 1;
                document.getElementById('totalPages').textContent = this.totalPages;
                
                // Update button states
                document.getElementById('firstBtn').disabled = this.currentPage <= 0;
                document.getElementById('prevBtn').disabled = this.currentPage <= 0;
                document.getElementById('nextBtn').disabled = this.currentPage >= this.totalPages - 1;
                document.getElementById('lastBtn').disabled = this.currentPage >= this.totalPages - 1;
                
                // Update thumbnails
                document.querySelectorAll('.thumbnail').forEach(thumb => {
                    thumb.classList.remove('active');
                    if (parseInt(thumb.dataset.page) === this.currentPage) {
                        thumb.classList.add('active');
                    }
                });
            }
            
            showFlipbook() {
                document.getElementById('flipbookContainer').style.display = 'block';
                document.getElementById('controls').style.display = 'flex';
            }
            
            showLoading(message) {
                document.getElementById('loading').style.display = 'block';
                document.getElementById('loadingText').textContent = message;
            }
            
            hideLoading() {
                document.getElementById('loading').style.display = 'none';
            }
            
            updateProgress(current, total) {
                const percent = Math.round((current / total) * 100);
                document.getElementById('loadingDetails').textContent = `${current} of ${total} pages processed (${percent}%)`;
            }
            
            showError(message, details = '') {
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('errorDetails').textContent = message;
                if (details) {
                    document.getElementById('errorDebug').textContent = details;
                }
            }
            
            hideError() {
                document.getElementById('errorMessage').style.display = 'none';
            }
            
            handleFileUpload(file) {
                if (!file || file.type !== 'application/pdf') {
                    this.showError('Please select a valid PDF file');
                    return;
                }
                
                document.getElementById('fileName').innerHTML = 
                    `<i class="fas fa-check"></i> Selected: <strong>${file.name}</strong> (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
                
                this.loadPDF(file);
            }
            
            zoomIn() {
                this.zoom = Math.min(3, this.zoom + 0.2);
                this.reloadVisiblePages();
            }
            
            zoomOut() {
                this.zoom = Math.max(0.5, this.zoom - 0.2);
                this.reloadVisiblePages();
            }
            
            resetZoom() {
                this.zoom = 1;
                this.reloadVisiblePages();
            }
            
            reloadVisiblePages() {
                // Reload current and adjacent pages
                const pagesToReload = [
                    this.currentPage,
                    this.currentPage + 1,
                    this.currentPage - 1
                ];
                
                pagesToReload.forEach(pageIndex => {
                    if (pageIndex >= 0 && pageIndex < this.totalPages) {
                        this.pages[pageIndex] = null;
                        this.renderPage(pageIndex);
                    }
                });
            }
        }

        // Global functions for button clicks
        function loadLocalPDF() {
            const fileName = document.getElementById('localFileName').value.trim();
            if (!fileName) {
                alert('Please enter a filename');
                return;
            }
            
            // Try different methods to load the file
            window.flipbook.loadPDF(fileName);
        }
        
        function loadFromURL() {
            const url = document.getElementById('pdfUrl').value.trim();
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            
            window.flipbook.loadPDF(url);
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', () => {
            window.flipbook = new PDFFlipbook();
            
            // Try to auto-load book.pdf if it exists
            autoDetectPDF();
        });
        
        function autoDetectPDF() {
            // Try to fetch book.pdf to see if it exists
            fetch('book.pdf')
                .then(response => {
                    if (response.ok) {
                        document.getElementById('loadingDetails').textContent = 'Found book.pdf, loading...';
                        setTimeout(() => loadLocalPDF(), 1000);
                    }
                })
                .catch(() => {
                    // File doesn't exist or can't be accessed
                    console.log('book.pdf not found or not accessible');
                });
        }

        // Handle drag and drop
        document.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.stopPropagation();
        });

        document.addEventListener('drop', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type === 'application/pdf') {
                window.flipbook.handleFileUpload(files[0]);
            }
        });

        // Add help text for CORS issues
        window.addEventListener('error', function(e) {
            if (e.message.includes('CORS') || e.message.includes('Access-Control')) {
                document.getElementById('errorDebug').innerHTML += 
                    '<br><br><strong>CORS Solution:</strong> Run a local server:<br>' +
                    '<code>python -m http.server 8000</code><br>' +
                    'Then access via: <code>http://localhost:8000</code>';
            }
        });
    </script>
</body>
</html>
